<!DOCTYPE html>
<html>
<head>
  <title>Electronic Bulletin Board</title>
  <script type="module" src="/client.js"></script>
</head>
<body>
    <% if (user) { %>
        <h1>Welcome, <%= user.displayName %>!</h1>
        <form action="/post" method="post">
            <textarea name="content" placeholder="Write your post here..." required></textarea>
            <button type="submit">Post</button>
        </form>
        <a href="/logout">Logout</a>
    <% } else { %>
        <a href="/auth/google">Login with Google</a>
    <% } %>

    <h2>Posts</h2>

    <!-- „Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏„ÅÆË°®Á§∫ -->
    <% if (error) { %>id INTEGER PRIMARY KEY AUTOINCREMENT,
        <div style="color: red;"><%= error %></div>
    <% } %>

    <ul>
      <% (posts || []).forEach(post => { %>
        <li>
          <strong><%= post.user_id %></strong>: <%= post.content %> - <%= post.timestamp %>
          <form action="/post/<%= post.id %>/upvote" method="post" style="display:inline;">
            <button type="submit">üëç (<%= post.upvotes %>)</button>
          </form>
          <form action="/post/<%= post.id %>/downvote" method="post" style="display:inline;">
            <button type="submit">üëé (<%= post.downvotes %>)</button>
          </form>
        </li>
      <% }) %>
    </ul>
            
    <div>
      <button type="button" id="newGroup">+</button>
      <form id="newGroupConfig" hidden>
        <label>„Ç∞„É´„Éº„ÉóÂêç<input name="name" required></label>
      </form>
    </div>

</body>
</html>
